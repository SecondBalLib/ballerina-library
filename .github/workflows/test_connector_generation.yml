name: Test Connector Generation

on:
  workflow_dispatch:
    inputs:
      spec-choice:
        description: "Choose which OpenAPI spec to test"
        required: true
        type: choice
        options:
          - petstore
        default: "petstore"

jobs:
  # Test with Petstore API (small JSON spec - the gold standard for testing)
  test-petstore:
    if: inputs.spec-choice == 'petstore'
    uses: ./.github/workflows/auto_generate_connector_template.yml
    with:
      openapi-url: "https://petstore3.swagger.io/api/v3/openapi.json"
      ballerina-version: "2201.13.0"
      quiet-mode: true
    secrets: inherit

